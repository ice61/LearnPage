<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>文本格式</title>
	<style type="text/css">
		h1 {
			color: skyblue;
			text-align: center;		/* 对齐方式 */
			font-size: 80px;
		}

		p {
			font-size: 15px;		
			line-height: 25px;		/* 行间距 一般比字体大7,8px */
			text-indent: 2em;		/* 首行缩进 1em就是一个字的宽度 */
			letter-spacing: 2px;	/* 字间距 */
		}

		.English {
			word-spacing: 10px;		/* 单词间距，对汉字无效 */
		}

		.touming {
			color: rgba(0,0,0,0.1);	/* 数值越大，透明度越低 */
			font-size: 25px;
		}

		.shadow {
			/* text-shadow: 水平位置（必须） 垂直位置（必须） 模糊距离（可选） 阴影颜色（可选） */
			text-shadow: 5px 5px 1px gray;
		}
	</style>
</head>
<body>
	<h1 class="shadow">后端介绍</h1>
	<p>每个微服务都是基于springboot的小应用，业务较为单一但五脏俱全，均可单独部署在不同的服务器上。相对于集中式架构，微服务架构代码耦合性低更便于针对不同的模块进行优化，单点容错率高，应对高并发的能力较强。结合应用场景，此作品采用微服务架构更为合适。</p>
	<h3>以zuul作为服务网关，实现动态路由，负载均衡和鉴权</h3>
	<p>动态路由：网关会通过请求路径，将请求动态的路由到后端不同的微服务集群。
	负载均衡：在必要情况下，我们将相同的微服务搭建成为集群，当用户请求到达时，网关会根据请求路径进行动态路由转发到相应的微服务，因为我们的微服务已经搭建成集群，zuul中默认集成的ribbon会自动帮我们进行负载均衡，hystix熔断机制会在服务出现问题时开启熔断，防止雪崩现象的出现。
	鉴权：网关是后端一切微服务的门户，所有的请求都必须经过网关。我们在网关中设置了拦截器并添加相应代码以此来实现微服务架构中的鉴权。</p>
	<h3>Nginx的负载均衡和反向代理</h3>
	<p>网关会对请求进行负载均衡，但是网关应对的多是外来请求，这些请求是无法进行负载均衡的，将所有请求均指向一个网关微服务显然是不现实的。Nginx作为高性能的web和反向代理服务器，单机能支持高达5w的并发连接数（tomcat为web应用服务器，一般最高调为800）因此我们可以将网关搭建成集群，使用Nginx进行负载均衡。并且我们这里使用nginx作为反向代理解决了端口冲突问题。</p>
	<h3>使用FastDFS做文件存储</h3>
	<p>上传文件时（此处为图片），我们绕过了网关缓存，通过路由直接到达目标微服务，提高了效率避免了网络阻塞。结合应用场景，我们需要存储的文件数量是十分庞大的，因此将其存在一个机器上显然不可行，我们需要实现分布式文件系统管理，所有的storage节点用来存储文件，tracker节点统一管理文件。每次上传或者访问文件，都是通过tracker（管理中心）来进行访问。（storage和tracker均可根据需要搭建为集群）</p>
	<h3>使用全文检索工具elasticsearch进行查询</h3>
	<p>在此系统中，我们需要查询的数据量是十分庞大的（全国的员工信息，全国用户的信息，全国用户的保单信息，权限信息等…），并且因数据量巨大，我们往往需要根据各种条件进行查询。当然，我们也需要对一些数据进行宏观上的观察。结合此应用场景，传统的数据库搜索是难以很好的支持此需求的。使用elasticsearch可以以极快的速度查询到用户所需要的数据并进行各种聚合。</p>
	<h3>通过rabbitMQ实现服务之间的通信和异步调用</h3>
	<p>此处我们的搜索功能被单独划分为一个微服务，所有信息均存储在相应的索引库而不是数据库。这样，在我们增添员工信息或者增添保单时，就需要对索引库进行更新。如果我们通过向搜索微服务发起同步请求，需等待搜索微服务将对应业务执行完毕后，员工或保单微服务才可继续执行并返回相应结果。这严重降低了系统应对高并发的能力和用户体验。采用消息队列进行异步调用，员工或保单微服务仅需要发出相应消息即可，而无需等待搜索微服务的响应。并且我们进行了对交换机，队列和消息进行了持久化。避免了消息的丢失。</p>
	<p class="English">Hello, my name is WuShang. I love eating meat.</p>
	<div class="touming">我是半透明的</div>


</body>
</html>